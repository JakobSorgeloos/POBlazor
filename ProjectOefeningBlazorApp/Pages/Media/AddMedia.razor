
@page "/addmedia"

@inject MediaService mediaService 
@inject NavigationManager NavigationManager
<AuthorizeView>

<Authorized>
    <h2>Add Media</h2>
<hr />

<form>
    <div class="row">
        <div class="col-md-8">
            <div class="form-group">
                <label for="Url" class="control-label">Url</label>
                <input form="Url" class="form-control" @bind="@vmForm.Url" />
            </div>
            <div class="form-group">
                <label for="Title" class="control-label">Title</label>
                <input form="Title" class="form-control" @bind="@vmForm.Title" />
            </div>
            <div class="form-group">
                <label for="MediaType" class="control-label">Media Type</label>
                <select @bind="@vmForm.MediaType" class="form-control">
                    <option value="">-Select Type</option>
                    <option value="Podcast">Podcast</option>
                    <option value="Music">Music</option>
                    <option value="Movie">Movie</option>
                    <option value="Series">Series</option>
                </select>
                </div>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="IsPublic" @bind-="@vmForm.IsPublic">
                       Public
                    </label>
                </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <input type="button" class="btn btn-primary" @onclick="@CreateMedia" value="Save" />
                <input type="button" class="btn btn-primary" @onclick="@Cancel" value="Cancel" />
            </div>
        </div>
    </div>
</form>
    </Authorized>
    <NotAuthorized>

        <p>Please <a href="Identity/Account/Login">login here</a></p> 
        <p>Or <a href="Identity/Account/Register">register</a> if you haven't already</p>

    </NotAuthorized>


    </AuthorizeView>




@code {
    AddMediaViewModel vmForm = new AddMediaViewModel();
    protected  void CreateMedia()
    {
        mediaService.InsertMedia(vmForm);
        NavigationManager.NavigateTo("media");
    }
    void Cancel()
    {
        NavigationManager.NavigateTo("media");
    }

}
